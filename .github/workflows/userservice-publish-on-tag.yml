name: HsR.UserService - Build & Publish on Version Tag

on:
  push:
    tags:
      - 'v*'
    paths:
      - "Common.Net.IdentityService/**"
  workflow_dispatch:

jobs:
  build-and-publish:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        
      - name: Run Dotnet Build & Publish Action
        uses: ./.github/actions/dotnet-publish-common
        with:
          project-path: ./Common.Net.IdentityService/HsR.UserService.Host
          image-name: userservice-backend
          github-token: ${{ secrets.GITHUB_TOKEN }}
